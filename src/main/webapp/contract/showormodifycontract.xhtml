	<html xmlns="http://www.w3.org/1999/xhtml"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:p="http://primefaces.org/ui">
	<h:head>
		<script name="jquery/jquery.js" library="primefaces"></script>
		<title>Akkis - Show or modify contract</title>
	</h:head>

	<h:body>
		<ui:composition template="../templates/template_action.xhtml">
		<ui:param name="title" value="Show or modify contract" />
			<ui:define name="content">
				<h4>Contact company that has made contract</h4>
				<p:panelGrid columns="2">
					<h:outputText value="Company name:"></h:outputText>
					<h:outputText 
						value="#{showOrModifyContract.contract.contactCompany.name}">
					</h:outputText>
					<h:outputText value="Company address:"></h:outputText>
					<h:outputText 
						value="#{showOrModifyContract.contract.contactCompany.address}">
					</h:outputText>
					<h:outputText value="Company internetaddress:"></h:outputText>
					<h:outputText 
						value="#{showOrModifyContract.contract.contactCompany.internetAddress}">
					</h:outputText>
					<h:outputText value="Company identifier:"></h:outputText>
					<h:outputText 
						value="#{showOrModifyContract.contract.contactCompany.companyIdentifier}">
					</h:outputText>
				</p:panelGrid>
			
				<h:form id="basicinfo">
					<h4>Show or modify basic contract information</h4>
					<p:panelGrid columns="2">
						<h:outputText value="Sign date:"></h:outputText>
						<p:calendar 
							value="#{showOrModifyContract.contract.signdate}" 
							rendered="#{showOrModifyContract.modifyBasics}">
						</p:calendar>
						<h:outputText 
							value="#{showOrModifyContract.contract.signdate}" 
							rendered="#{not showOrModifyContract.modifyBasics}">
						</h:outputText>
					
						<h:outputText value="End date:"></h:outputText>
						<p:calendar 
							value="#{showOrModifyContract.contract.enddate}"
							rendered="#{showOrModifyContract.modifyBasics}">
						</p:calendar>
						<h:outputText 
							value="#{showOrModifyContract.contract.enddate}" 
							rendered="#{not showOrModifyContract.modifyBasics}">
						</h:outputText>
					
						<h:outputText value="Status:"></h:outputText>
						<p:selectOneRadio value="#{showOrModifyContract.contract.contractstatus}"
							rendered="#{showOrModifyContract.modifyBasics}">
							<f:selectItems value="#{showOrModifyContract.statusOptions}"/>
						</p:selectOneRadio>
						<h:outputText 
							value="#{showOrModifyContract.contract.contractstatus}"
							rendered="#{not showOrModifyContract.modifyBasics}">
						</h:outputText>
					
						<h:outputText value="Price:"></h:outputText>
						<h:inputText 
							value="#{showOrModifyContract.contract.price}"
							rendered="#{showOrModifyContract.modifyBasics}">
						</h:inputText>
						<h:outputText 
							value="#{showOrModifyContract.contract.price}"
							rendered="#{not showOrModifyContract.modifyBasics}">
						</h:outputText>
						
						<h:outputText value="Price period:"></h:outputText>
						<p:selectOneRadio value="#{showOrModifyContract.contract.pricePeriodType}"
							rendered="#{showOrModifyContract.modifyBasics}">
							<f:selectItems value="#{showOrModifyContract.pricePeriodTypeOptions}"/>
						</p:selectOneRadio>
						<h:outputText 
							value="#{showOrModifyContract.pricePeriodText}"
							rendered="#{not showOrModifyContract.modifyBasics}">
						</h:outputText>
						
						<h:outputText value="Value added tax percent:"></h:outputText>
						<h:inputText 
							value="#{showOrModifyContract.contract.valueAddedTaxPercent}"
							rendered="#{showOrModifyContract.modifyBasics}">
						</h:inputText>
						<h:outputText 
							value="#{showOrModifyContract.contract.valueAddedTaxPercent}"
							rendered="#{not showOrModifyContract.modifyBasics}">
						</h:outputText>

						<h:outputText value="Technication user:"/>
						<p:selectOneMenu value="#{showOrModifyContract.selectedTechnicationUser}" 
							rendered="#{showOrModifyContract.modifyBasics}">
							<f:selectItems value="#{showOrModifyContract.technicationUsers}"/>
						</p:selectOneMenu>
						<h:outputText 
							value="#{showOrModifyContract.technicationUserName}"
							rendered="#{not showOrModifyContract.modifyBasics}">
						</h:outputText>
						<p:commandButton 
							value="Modify contract" 
							action="#{showOrModifyContract.toModifyBasics}"
							rendered="#{not showOrModifyContract.modifyBasics}"
							update="basicinfo">
							<f:setPropertyActionListener  
								target="#{showOrModifyContract.modifyBasics}"
								value="true"/>
						</p:commandButton>			
						<p:commandButton 
							value="Save contract" 
							action="#{showOrModifyContract.saveModifiedContract}"
							rendered="#{showOrModifyContract.modifyBasics}"
							update="basicinfo">
							<f:setPropertyActionListener  
								target="#{showOrModifyContract.modifyBasics}"
								value="false"/>
						</p:commandButton>
					</p:panelGrid>
				</h:form>
				<h:form id="contractcontacts">
					<p:dataTable value="#{showOrModifyContract.contract.contacts}" 
						id="contact"	
						var="c"
						rowKey="#{c.contactId}"
						selection="#{showOrModifyContactView.selectedContact}"
						selectionMode="single">
						<f:facet name="header">
                   			Customers that have participated contract
               			</f:facet>
						<p:column style="width:18px" />
						<p:column headerText="Name">
                   			#{c.name}  
               			</p:column>
						<p:column headerText="Phone">
                   			#{c.phone}  
               			</p:column>
						<p:column headerText="Address">
                   			#{c.address}  
               			</p:column>
						<p:column headerText="Country">
                   			#{c.country}  
               			</p:column>
						<f:facet name="footer">
							<p:commandButton value="Show or modify"
								action="#{showOrModifyContactView.toShowOrModifyContact}">
								<f:setPropertyActionListener target="#{showOrModifyContactView.backPage}"
					    			value="/contract/showormodifycontract"/>
							</p:commandButton>
						</f:facet>
					</p:dataTable>
				
					<h4>Add contacts to contracts</h4>
	 				<p:dataTable 
	 					value="#{showOrModifyContract.contactsInContactCompanyButNotInContract}" 
	 					id="contactsOfCompanyNotInContract"
						var="c" 
						rowKey="#{c.contactId}" 
						selection="#{showOrModifyContract.contactsToBeAdded}"
						selectionMode="multiple" >
						<f:facet name="header">
                   			List of contacts in contact company but not in contract
    	            	</f:facet>
    	            	
						<p:column headerText="Name">#{c.name}</p:column>
						<p:column headerText="Phone">#{c.phone}</p:column>
						<p:column headerText="Address">#{c.address}</p:column>
						<p:column headerText="Country">#{c.country}</p:column>
						
	 					<f:facet name="footer">
							<p:commandButton 
								value="Add to contract" 
								action="#{showOrModifyContract.toAddContactsToContract}"
								update="contractcontacts">
							</p:commandButton>
						</f:facet> 
					</p:dataTable>
				</h:form>
			</ui:define>
		</ui:composition>
	</h:body>
</html>